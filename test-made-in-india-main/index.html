<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D2C Brand Investigator (AI-Enhanced)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <main class="w-full max-w-4xl bg-white rounded-xl shadow-lg p-6 md:p-8">

        <div class="flex items-center gap-3 mb-6">
            <svg class="w-8 h-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
            <div>
                <h1 class="text-2xl font-bold text-slate-800">D2C Brand Investigator</h1>
                <p class="text-sm text-slate-600">AI-Enhanced with Gemini & Firecrawl</p>
            </div>
        </div>

        <!-- API Configuration Section -->
        <div class="space-y-4 mb-6 p-4 bg-slate-50 rounded-lg">
            <h3 class="font-semibold text-slate-700 mb-3">üîß API Configuration</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                    <label for="serperApiKey" class="block text-sm font-medium text-slate-600 mb-1">
                        Serper API Key <span class="text-red-500">*</span>
                    </label>
                    <input type="password" id="serperApiKey"
                        class="w-full bg-white border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="Required - Get from serper.dev">
                </div>
                <div>
                    <label for="geminiApiKey" class="block text-sm font-medium text-slate-600 mb-1">
                        Gemini API Key <span class="text-red-500">*</span>
                    </label>
                    <input type="password" id="geminiApiKey"
                        class="w-full bg-white border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="Required - Get from ai.google.dev">
                </div>
                <div>
                    <label for="firecrawlApiKey" class="block text-sm font-medium text-slate-600 mb-1">
                        Firecrawl API Key <span class="text-green-600">(Optional)</span>
                    </label>
                    <input type="password" id="firecrawlApiKey"
                        class="w-full bg-white border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="Optional - Enhances content parsing">
                </div>
                <div>
                    <label for="rapidApiKey" class="block text-sm font-medium text-slate-600 mb-1">
                        RapidAPI Key <span class="text-green-600">(Optional)</span>
                    </label>
                    <input type="password" id="rapidApiKey"
                        class="w-full bg-white border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="Optional - LinkedIn profile analysis">
                </div>
            </div>
            <p class="text-xs text-slate-500">
                <span class="text-red-500">*</span> Required keys ‚Ä¢
                <span class="text-green-600">Optional:</span> Firecrawl enhances content parsing, RapidAPI enables LinkedIn analysis ‚Ä¢
                All keys stored securely in your browser only
            </p>
        </div>

        <!-- Investigation Inputs -->
        <div class="space-y-4 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="brandName" class="block text-sm font-medium text-slate-600 mb-1">Brand Name</label>
                    <input type="text" id="brandName"
                        class="w-full bg-slate-50 border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="e.g., Perfora, Seven Oral Care">
                </div>
                <div>
                    <label for="productCategory" class="block text-sm font-medium text-slate-600 mb-1">Product
                        Category</label>
                    <input type="text" id="productCategory"
                        class="w-full bg-slate-50 border border-slate-300 rounded-md shadow-sm px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="e.g., electric toothbrush, skincare, supplements">
                </div>
            </div>

            <button id="investigateBtn"
                class="w-full bg-indigo-600 text-white font-semibold px-5 py-3 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200 disabled:opacity-50">
                ü§ñ Start AI Investigation
            </button>
        </div>

        <!-- Progress Indicator -->
        <div id="progressSection" class="hidden mb-6">
            <div class="flex justify-between items-center mb-2">
                <span id="progressText" class="text-sm font-medium text-slate-600">Preparing investigation...</span>
                <span id="progressPercent" class="text-sm text-slate-500">0%</span>
            </div>
            <div class="step-progress">
                <div id="progressBar" class="step-progress-bar" style="width: 0%"></div>
            </div>
        </div>

        <!-- Status/Error Display -->
        <div id="status" class="hidden text-center my-6"></div>

        <!-- Important Disclaimer -->
        <div id="disclaimer" class="hidden mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <h3 class="font-semibold text-yellow-900 mb-2 flex items-center gap-2">
                ‚ö†Ô∏è Analysis Limitations & Disclaimer
            </h3>
            <div class="text-sm text-yellow-800 space-y-2">
                <p><strong>Important:</strong> This investigation relies on publicly available digital information,
                    which may be limited or incomplete for many organizations.</p>
                <ul class="ml-4 space-y-1 text-xs">
                    <li>‚Ä¢ <strong>Missing Data:</strong> Many companies have minimal online presence or corporate
                        records</li>
                    <li>‚Ä¢ <strong>Outdated Information:</strong> Import records, registrations may not reflect current
                        operations</li>
                    <li>‚Ä¢ <strong>Regional Variations:</strong> Some data sources are region-specific and may miss
                        information</li>
                    <li>‚Ä¢ <strong>AI Limitations:</strong> Analysis is based on available data and may not capture full
                        context</li>
                </ul>
                <p class="text-xs font-medium">Always conduct additional due diligence and verify findings through
                    multiple sources before making business decisions.</p>
            </div>
        </div>

        <!-- AI Analysis Summary -->
        <div id="aiSummary" class="hidden mb-6 p-4 ai-analysis rounded-lg">
            <div class="flex justify-between items-center mb-2">
                <h3 class="font-semibold text-purple-900 flex items-center gap-2">
                    ü§ñ AI Analysis Summary
                </h3>
                <button id="downloadReportBtn"
                    class="px-3 py-1 bg-purple-600 text-white text-xs rounded-md hover:bg-purple-700 transition-colors">
                    üìÑ Download PDF Report
                </button>
            </div>
            <div id="aiSummaryContent" class="text-sm text-purple-800"></div>
        </div>

        <!-- Investigation Summary -->
        <div id="summary" class="hidden mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h3 class="font-semibold text-blue-900 mb-2">üìä Investigation Summary</h3>
            <div id="summaryContent" class="text-sm text-blue-800"></div>
        </div>

        <!-- Results Section -->
        <div id="results" class="hidden space-y-4">
            <!-- Dynamically generated result cards will go here -->
        </div>
    </main>

    <script type="module" src="assets/js/app.js"></script>
</body>

</html>